# DA Node API

## Table of Contents

* [Protocol Documentation](api.md#protocol-documentation)
  * [Table of Contents](api.md#table-of-contents)
  * [signer.proto](api.md#signerproto)
    * [BatchRetrieveReply](api.md#batchretrievereply)
    * [BatchRetrieveRequest](api.md#batchretrieverequest)
    * [BatchSignReply](api.md#batchsignreply)
    * [BatchSignRequest](api.md#batchsignrequest)
    * [RetrieveRequest](api.md#retrieverequest)
    * [SignRequest](api.md#signrequest)
    * [Slices](api.md#slices)
    * [Signer](api.md#signer)
  * [Scalar Value Types](api.md#scalar-value-types)

## signer.proto

### BatchRetrieveReply

| Field          | Type                           | Label    | Description             |
| -------------- | ------------------------------ | -------- | ----------------------- |
| encoded\_slice | [Slices](api.md#signer-Slices) | repeated | required encoded slices |

### BatchRetrieveRequest

| Field    | Type                                             | Label    | Description |
| -------- | ------------------------------------------------ | -------- | ----------- |
| requests | [RetrieveRequest](api.md#signer-RetrieveRequest) | repeated |             |

### BatchSignReply

| Field      | Type                  | Label    | Description             |
| ---------- | --------------------- | -------- | ----------------------- |
| signatures | [bytes](api.md#bytes) | repeated | signatures for requests |

### BatchSignRequest

| Field    | Type                                     | Label    | Description |
| -------- | ---------------------------------------- | -------- | ----------- |
| requests | [SignRequest](api.md#signer-SignRequest) | repeated |             |

### RetrieveRequest

| Field         | Type                    | Label    | Description                                 |
| ------------- | ----------------------- | -------- | ------------------------------------------- |
| epoch         | [uint64](api.md#uint64) |          | epoch number of DASigners internal contract |
| quorum\_id    | [uint64](api.md#uint64) |          | quorum id of DASigners internal contract    |
| storage\_root | [bytes](api.md#bytes)   |          | merkle root of data                         |
| row\_indexes  | [uint32](api.md#uint32) | repeated | required row indexes                        |

### SignRequest

| Field               | Type                    | Label    | Description                                 |
| ------------------- | ----------------------- | -------- | ------------------------------------------- |
| epoch               | [uint64](api.md#uint64) |          | epoch number of DASigners internal contract |
| quorum\_id          | [uint64](api.md#uint64) |          | quorum id of DASigners internal contract    |
| erasure\_commitment | [bytes](api.md#bytes)   |          | erasure commitment generated by encoder     |
| storage\_root       | [bytes](api.md#bytes)   |          | merkle root of data                         |
| encoded\_slice      | [bytes](api.md#bytes)   | repeated | encoded slices of data                      |

### Slices

| Field          | Type                  | Label    | Description |
| -------------- | --------------------- | -------- | ----------- |
| encoded\_slice | [bytes](api.md#bytes) | repeated |             |

### Signer

| Method Name   | Request Type                                               | Response Type                                          | Description                                                                                                                                                    |
| ------------- | ---------------------------------------------------------- | ------------------------------------------------------ | -------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| BatchSign     | [BatchSignRequest](api.md#signer-BatchSignRequest)         | [BatchSignReply](api.md#signer-BatchSignReply)         | This API accepts rows of encoded blobs to sign from clients. The node will verify the blobs existance in `DAEntrance` contract and validate the received rows. |
| BatchRetrieve | [BatchRetrieveRequest](api.md#signer-BatchRetrieveRequest) | [BatchRetrieveReply](api.md#signer-BatchRetrieveReply) | This retrieves the requested encoded rows from the DA node database.                                                                                           |

## Scalar Value Types

| .proto Type | Notes                                                                                                                                           | C++    | Java       | Python      | Go      | C#         | PHP            | Ruby                           |
| ----------- | ----------------------------------------------------------------------------------------------------------------------------------------------- | ------ | ---------- | ----------- | ------- | ---------- | -------------- | ------------------------------ |
| double      |                                                                                                                                                 | double | double     | float       | float64 | double     | float          | Float                          |
| float       |                                                                                                                                                 | float  | float      | float       | float32 | float      | float          | Float                          |
| int32       | Uses variable-length encoding. Inefficient for encoding negative numbers – if your field is likely to have negative values, use sint32 instead. | int32  | int        | int         | int32   | int        | integer        | Bignum or Fixnum (as required) |
| int64       | Uses variable-length encoding. Inefficient for encoding negative numbers – if your field is likely to have negative values, use sint64 instead. | int64  | long       | int/long    | int64   | long       | integer/string | Bignum                         |
| uint32      | Uses variable-length encoding.                                                                                                                  | uint32 | int        | int/long    | uint32  | uint       | integer        | Bignum or Fixnum (as required) |
| uint64      | Uses variable-length encoding.                                                                                                                  | uint64 | long       | int/long    | uint64  | ulong      | integer/string | Bignum or Fixnum (as required) |
| sint32      | Uses variable-length encoding. Signed int value. These more efficiently encode negative numbers than regular int32s.                            | int32  | int        | int         | int32   | int        | integer        | Bignum or Fixnum (as required) |
| sint64      | Uses variable-length encoding. Signed int value. These more efficiently encode negative numbers than regular int64s.                            | int64  | long       | int/long    | int64   | long       | integer/string | Bignum                         |
| fixed32     | Always four bytes. More efficient than uint32 if values are often greater than 2^28.                                                            | uint32 | int        | int         | uint32  | uint       | integer        | Bignum or Fixnum (as required) |
| fixed64     | Always eight bytes. More efficient than uint64 if values are often greater than 2^56.                                                           | uint64 | long       | int/long    | uint64  | ulong      | integer/string | Bignum                         |
| sfixed32    | Always four bytes.                                                                                                                              | int32  | int        | int         | int32   | int        | integer        | Bignum or Fixnum (as required) |
| sfixed64    | Always eight bytes.                                                                                                                             | int64  | long       | int/long    | int64   | long       | integer/string | Bignum                         |
| bool        |                                                                                                                                                 | bool   | boolean    | boolean     | bool    | bool       | boolean        | TrueClass/FalseClass           |
| string      | A string must always contain UTF-8 encoded or 7-bit ASCII text.                                                                                 | string | String     | str/unicode | string  | string     | string         | String (UTF-8)                 |
| bytes       | May contain any arbitrary sequence of bytes.                                                                                                    | string | ByteString | str         | \[]byte | ByteString | string         | String (ASCII-8BIT)            |
